<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>The Story of Prophecy Explorer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.0.0/openseadragon.min.js"></script>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }

      .centered {
        text-align: center;
        margin-top: 60px;
      }

      #viewerContainer {
        display: none;
        width: 90%;
        max-width: 1200px;
        height: 800px;
        margin: 50px auto;
        border: 1px solid #ccc;
        position: relative;
      }

      #openseadragon {
        width: 100%;
        height: 100%;
      }

      #exitButton {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 1000;
        background-color: #fff;
        border: 1px solid #ccc;
        padding: 6px 12px;
        cursor: pointer;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="centered">
      <h1>The Story of Prophecy Explorer</h1>
      <button onclick="enterViewer()">Enter Map Viewer</button>
    </div>

    <div id="viewerContainer">
      <button id="exitButton" onclick="exitViewer()">Exit Viewer</button>
      <div id="openseadragon"></div>
    </div>

    <script>
      let viewer = null;

      function enterViewer() {
        document.getElementById('viewerContainer').style.display = 'block';

        // Only initialize if not already done
        if (!viewer) {
          viewer = OpenSeadragon({
            id: "openseadragon",
            prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.0.0/images/",
            tileSources: "the-story-of-prophecy-tiles.dzi",
            showNavigator: true,
            animationTime: 1.5,
            blendTime: 0.1,
            maxZoomPixelRatio: 2,
            visibilityRatio: 1,
            minZoomLevel: 1
          });
        }
        
        // Scroll to the viewer smoothly
        document.getElementById('viewerContainer').scrollIntoView({ behavior: 'smooth' });
      }

      function exitViewer() {
        document.getElementById('viewerContainer').style.display = 'none';
      }
    </script>
  </body>
</html>
